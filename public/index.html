<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>HOO Smart Monitor V6.0 - Jairokov Systems</title>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#050608">
    <script src="https://cdn.tailwindcss.com"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@400;500;600;700&family=Inter:wght@300;400;600;700;800&display=swap"
        rel="stylesheet">
    <style>
        :root {
            --bg-deep: #050608;
            --bg-card: #121415;
            --accent-gold: #e2b053;
            --accent-gold-glow: rgba(226, 176, 83, 0.4);
            --accent-green: #00d49a;
            --accent-red: #ff4b4b;
            --text-dim: #64748b;
        }
        * {
            -webkit-tap-highlight-color: transparent;
            user-select: none;
        }
        body {
            background-color: var(--bg-deep);
            color: white;
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        .font-rajdhani {
            font-family: 'Rajdhani', sans-serif;
        }
        /* Banner de Marketing Corregido: Más grande, más lento, más legible */
        .marketing-banner {
            background: #000;
            border-bottom: 1px solid rgba(226, 176, 83, 0.3);
            height: 32px;
            display: flex;
            align-items: center;
            overflow: hidden;
            z-index: 100;
        }
        .marketing-content {
            white-space: nowrap;
            display: inline-block;
            animation: moveBanner 55s linear infinite;
            /* Más lento */
            color: var(--accent-gold);
            font-size: 10px;
            /* Más grande */
            font-weight: 800;
            letter-spacing: 3px;
            text-transform: uppercase;
        }
        @keyframes moveBanner {
            0% {
                transform: translateX(100%);
            }
            100% {
                transform: translateX(-100%);
            }
        }
        .gauge-container {
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 25px 0;
        }
        .gauge-svg {
            filter: drop-shadow(0 0 15px var(--accent-gold-glow));
            transform: rotate(-90deg);
        }
        .gauge-segment-bg {
            fill: none;
            stroke: rgba(255, 255, 255, 0.05);
            stroke-width: 12;
            stroke-dasharray: 4 2;
        }
        .gauge-segment-progress {
            fill: none;
            stroke: var(--accent-gold);
            stroke-width: 12;
            stroke-dasharray: 4 2;
            stroke-dashoffset: 440;
            transition: stroke-dashoffset 2s cubic-bezier(0.16, 1, 0.3, 1);
        }
        .glass-card {
            background: var(--bg-card);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 20px;
        }
        .gold-h {
            color: var(--accent-gold);
        }
        .sparkline {
            fill: none;
            stroke: var(--accent-green);
            stroke-width: 2.5;
            stroke-linecap: round;
            filter: drop-shadow(0 0 5px rgba(0, 212, 154, 0.3));
        }
        .nav-bar {
            background: #050608;
            border-top: 1px solid rgba(255, 255, 255, 0.05);
            height: 65px;
            display: flex;
            justify-content: space-around;
            align-items: center;
            padding-bottom: env(safe-area-inset-bottom);
        }
        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 2px;
            color: var(--text-dim);
            font-size: 8px;
            font-weight: 800;
        }
        .nav-item.active {
            color: white;
        }
        /* Banner de Alerta Temporizado */
        #alert-notification {
            position: fixed;
            top: 32px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(90deg, #ff4b4b, #8b0000);
            color: white;
            padding: 6px 20px;
            font-size: 10px;
            font-weight: 900;
            border-radius: 0 0 12px 12px;
            z-index: 200;
            display: none;
            text-transform: uppercase;
            letter-spacing: 2px;
            box-shadow: 0 10px 20px rgba(255, 0, 0, 0.2);
            animation: slideIn 0.5s ease-out;
        }
        @keyframes slideIn {
            from {
                transform: translate(-50%, -100%);
            }
            to {
                transform: translate(-50%, 0);
            }
        }
        @media (max-height: 700px) {
            .gauge-container {
                transform: scale(0.9);
                padding: 10px 0;
            }
            .cards-container {
                margin-top: -15px !important;
            }
        }
    </style>
</head>
<body>
    <div id="splash"
        style="position: fixed; inset: 0; background: #050608; z-index: 1000; display: flex; flex-direction: column; align-items: center; justify-content: center; transition: 0.6s;">
        <svg width="80" height="80" viewBox="0 0 100 100">
            <polyline points="20,35 50,55 80,35" fill="none" stroke="var(--accent-gold)" stroke-width="5"
                stroke-linecap="round" stroke-linejoin="round" />
            <circle cx="35" cy="50" r="11" fill="white" />
            <circle cx="65" cy="50" r="11" fill="white" />
            <circle cx="35" cy="50" r="4.5" fill="#050608" />
            <circle cx="65" cy="50" r="4.5" fill="#050608" />
            <polygon points="50,60 43,69 50,78 57,69" fill="var(--accent-gold)" />
        </svg>
        <h1 class="mt-6 font-rajdhani text-3xl font-bold tracking-[0.4em] text-white"><span class="gold-h">H</span>OO
        </h1>
        <button onclick="startApp()"
            class="mt-12 px-12 py-3 glass-card font-black text-[10px] gold-h border-gold-500/20 uppercase tracking-[0.3em]">Conectar
            Terminal</button>
    </div>
    <!-- Marketing Banner Titulares (Corregido) -->
    <div class="marketing-banner">
        <div class="marketing-content">
            /// JAIROKOV SYSTEMS: AUTOMATIZACIONES CON INTELIGENCIA ARTIFICIAL /// SISTEMAS PARA EMPRENDEDORES Y PYMES
            /// HOO MONITOR: PRECISIÓN TOTAL SIN OCR /// TENDENCIAS DEL MERCADO EN TIEMPO REAL /// MVP DESARROLLADO PARA
            EL ÉXITO COMERCIAL ///
        </div>
    </div>
    <!-- Alertas Temporales -->
    <div id="alert-notification">⚠️ ALERTA: TENDENCIA VOLÁTIL DETECTADA</div>
    <div class="flex-1 flex flex-col container mx-auto max-w-lg px-6">
        <header class="pt-6 flex justify-between items-start">
            <div class="flex items-center gap-3">
                <div class="w-11 h-11 glass-card flex items-center justify-center border-white/5 shadow-xl">
                    <svg width="24" height="24" viewBox="0 0 100 100">
                        <polyline points="20,35 50,55 80,35" fill="none" stroke="var(--accent-gold)" stroke-width="6"
                            stroke-linecap="round" stroke-linejoin="round" />
                        <circle cx="35" cy="50" r="10" fill="white" />
                        <circle cx="65" cy="50" r="10" fill="white" />
                        <circle cx="35" cy="50" r="4" fill="#050608" />
                        <circle cx="65" cy="50" r="4" fill="#050608" />
                        <polygon points="50,60 44,68 50,76 56,68" fill="var(--accent-gold)" />
                    </svg>
                </div>
                <div>
                    <h2 class="font-rajdhani text-2xl font-bold tracking-widest text-white leading-none"><span
                            class="gold-h">H</span>OO</h2>
                    <p class="text-[8px] text-white/40 font-black uppercase tracking-[0.2em] mt-1.5">DÓLAR MONITOR</p>
                </div>
            </div>
            <div class="flex gap-2">
                <button onclick="toggleMute()" id="muteBtn"
                    class="w-10 h-10 glass-card flex items-center justify-center text-white/30"><i
                        data-lucide="volume-2" class="w-4 h-4"></i></button>
                <button onclick="sync()" class="w-10 h-10 glass-card flex items-center justify-center text-white/30"><i
                        data-lucide="refresh-cw" id="syncIcon" class="w-4 h-4"></i></button>
            </div>
        </header>
        <div class="gauge-container">
            <svg width="210" height="210" viewBox="0 0 160 160" class="gauge-svg">
                <circle class="gauge-segment-bg" cx="80" cy="80" r="70" />
                <circle id="gauge-arc" class="gauge-segment-progress" cx="80" cy="80" r="70" />
            </svg>
            <div class="absolute inset-0 flex flex-col items-center justify-center text-center">
                <span
                    style="font-size: 8px; color: var(--accent-gold); font-weight: 800; letter-spacing: 2px; margin-bottom: 5px; opacity: 0.6;">DIFERENCIAL</span>
                <span id="brecha-porc"
                    class="font-rajdhani text-5xl font-extrabold tracking-tighter leading-none">--%</span>
                <div class="mt-6 flex flex-col items-center pt-2 border-t border-white/10 w-32">
                    <span id="brecha-bs" class="text-sm font-bold text-white/90">Bs. --,--</span>
                    <span
                        style="font-size: 7px; color: white; opacity: 0.2; font-weight: 900; letter-spacing: 2px; margin-top: 4px;">BRECHA
                        NETA</span>
                </div>
            </div>
        </div>
        <div class="cards-container grid grid-cols-2 gap-4 mt-2">
            <div class="glass-card p-5">
                <div class="flex justify-between items-center mb-4">
                    <span class="text-[8px] font-bold text-white/30 tracking-widest uppercase">BINANCE P2P</span>
                    <span id="var-usdt" class="text-[8px] font-black text-green-500">+0.00%</span>
                </div>
                <h3 id="usdt" class="font-rajdhani text-3xl font-bold">--,--</h3>
                <p class="text-[7px] text-white/20 mt-1">VES / USDT</p>
                <div class="h-6 mt-3"><svg viewBox="0 0 100 20" class="w-full h-full">
                        <path class="sparkline" d="M0,15 Q20,5 40,15 T70,5 T100,10" />
                    </svg></div>
            </div>
            <div class="glass-card p-5">
                <div class="flex justify-between items-center mb-4">
                    <span class="text-[8px] font-bold text-white/30 tracking-widest uppercase">OFICIAL BCV</span>
                    <span class="text-[8px] font-black text-white/40">+0.00%</span>
                </div>
                <h3 id="bcv" class="font-rajdhani text-3xl font-bold text-white/80">--,--</h3>
                <p class="text-[7px] text-white/20 mt-1">VES / BCV</p>
                <div class="h-6 mt-3"><svg viewBox="0 0 100 20" class="w-full h-full">
                        <path class="sparkline" stroke="var(--text-dim)" d="M0,10 Q50,10 100,10" />
                    </svg></div>
            </div>
            <div class="glass-card p-4 col-span-2 flex justify-between items-center bg-[#181a1b]">
                <div class="flex flex-col">
                    <span class="text-[7px] font-black text-[#e2b053]/60 uppercase tracking-[2px]">Tasa Euro
                        Oficial</span>
                    <span id="eur" class="font-rajdhani text-xl font-bold gold-h">--,-- Bs.</span>
                </div>
                <div class="py-1 px-3 glass-card text-[7px] font-black tracking-[1px] border-[#e2b053]/20 uppercase">
                    Ancla Diaria</div>
            </div>
        </div>
        <div class="mt-6 glass-card p-4 flex items-center justify-between border-white/5">
            <div class="flex flex-col">
                <span class="text-[7px] text-white/30 font-bold tracking-[2px] uppercase mb-1">SISTEMA ELITE</span>
                <span class="font-rajdhani text-sm font-bold tracking-[2px]">@JAIROKOV</span>
            </div>
            <div class="flex gap-4">
                <a href="https://instagram.com/jairokov" target="_blank" class="social-btn"><i data-lucide="instagram"
                        class="w-4 h-4"></i></a>
                <a href="https://t.me/jairokov" target="_blank" class="social-btn"><i data-lucide="send"
                        class="w-4 h-4"></i></a>
                <a href="https://x.com/jairokov" target="_blank" class="social-btn"><i data-lucide="twitter"
                        class="w-4 h-4"></i></a>
            </div>
        </div>
        <div class="mt-auto mb-4 text-center py-4">
            <p class="text-[8px] text-white/10 font-black uppercase tracking-[0.4em]">PROPIEDAD DE <span
                    class="gold-h">JAIROKOV SYSTEMS</span> © 2026</p>
        </div>
    </div>
    <nav class="nav-bar shrink-0">
        <div class="nav-item"><i data-lucide="home" class="w-5 h-5"></i><span>INICIO</span></div>
        <div class="nav-item active"><i data-lucide="bar-chart-2" class="w-5 h-5"></i><span>MONITOR</span></div>
        <div class="nav-item"><i data-lucide="circle-dollar-sign" class="w-5 h-5"></i><span>DIVISAS</span></div>
        <div class="nav-item"><i data-lucide="user" class="w-5 h-5"></i><span>PERFIL</span></div>
    </nav>
    <audio id="alert-sound" src="https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3"
        preload="auto"></audio>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script>
        lucide.createIcons();
        let lastId = null;
        let isMuted = false;
        const audio = document.getElementById('alert-sound');
        function startApp() {
            document.getElementById('splash').style.opacity = '0';
            setTimeout(() => { document.getElementById('splash').style.display = 'none'; sync(); }, 600);
        }
        function toggleMute() {
            isMuted = !isMuted;
            document.getElementById('muteBtn').style.color = isMuted ? 'var(--accent-red)' : 'var(--text-dim)';
        }
        async function sync() {
            const icon = document.getElementById('syncIcon');
            icon.classList.add('animate-spin');
            try {
                const r = await fetch('/precio-actual');
                const d = await r.json();
                if (!d || !d.id) return;
                document.getElementById('usdt').innerText = d.precio_usdt;
                document.getElementById('bcv').innerText = d.precio_bcv;
                document.getElementById('eur').innerText = d.precio_eur || '--,--';
                const vMercado = d.variacion_mercado || '0.00%';
                const varLabel = document.getElementById('var-usdt');
                varLabel.innerText = vMercado;
                varLabel.style.color = (d.status === 'bajando') ? 'var(--accent-red)' : 'var(--accent-green)';
                const bcvNum = parseFloat(String(d.precio_bcv).replace(',', '.'));
                const usdtNum = parseFloat(String(d.precio_usdt).replace(',', '.'));
                const currentGap = ((usdtNum - bcvNum) / bcvNum) * 100;
                document.getElementById('brecha-porc').innerText = d.brecha_porcentaje || (currentGap.toFixed(2) + '%');
                document.getElementById('brecha-bs').innerText = `Bs. ${(usdtNum - bcvNum).toFixed(2)}`;
                document.getElementById('gauge-arc').style.strokeDashoffset = 440 - (440 * Math.min(currentGap, 35) / 35);
                // Lógica de Alertas Temporales (Sincronizada con n8n)
                if (d.id !== lastId) {
                    // Solo activar audio si n8n dice alerta_audio=true (Umbral > 2%)
                    if (d.alerta_audio && !isMuted) audio.play().catch(() => { });
                    // Banner Temporal (Aparece y desaparece a los 8 segundos)
                    if (d.mostrar_banner) {
                        const banner = document.getElementById('alert-notification');
                        banner.style.display = 'block';
                        setTimeout(() => {
                            banner.style.animation = 'slideIn 0.5s reverse';
                            setTimeout(() => {
                                banner.style.display = 'none';
                                banner.style.animation = 'slideIn 0.5s ease-out';
                            }, 450);
                        }, 8000); // 8 segundos de visibilidad
                    }
                    lastId = d.id;
                }
            } catch (e) {
                console.error("Error Sync", e);
            } finally {
                setTimeout(() => icon.classList.remove('animate-spin'), 1000);
            }
        }
        setInterval(sync, 30000); // Check cada 30 segundos
    </script>
</body>
</html>
